window.__require=function e(t,i,a){function o(s,l){if(!i[s]){if(!t[s]){var r=s.split("/");if(r=r[r.length-1],!t[r]){var c="function"==typeof __require&&__require;if(!l&&c)return c(r,!0);if(n)return n(r,!0);throw new Error("Cannot find module '"+s+"'")}}var h=i[s]={exports:{}};t[s][0].call(h.exports,function(e){return o(t[s][1][e]||e)},h,h.exports,e,t,i,a)}return i[s].exports}for(var n="function"==typeof __require&&__require,s=0;s<a.length;s++)o(a[s]);return o}({AD:[function(e,t,i){"use strict";cc._RF.push(t,"baaa9LLAd1KFo1NpobPPSy4","AD");e("LoadResLayer");cc.Class({extends:cc.Component,properties:{},onLoad:function(){},init:function(e){this.gameCtl=e},tipClick:function(e){var t=e.target.name;"closeBtn"===t?this.node.destroy():"confirmBtn"===t&&(this.gameCtl.revive(),this.node.destroy())}}),cc._RF.pop()},{LoadResLayer:"LoadResLayer"}],BallManage:[function(e,t,i){"use strict";cc._RF.push(t,"bb524dqsaZGmIwyV9raEsoK","BallManage"),cc.Class({extends:cc.Component,properties:{ballNumberLb:cc.Label,ballScoreLb:cc.Label,addBallLb:cc.Label},init:function(e){this.gameCtl=e,this.ballNumberLb.string=""+this.gameCtl.ballNumber,this.ballScoreLb.string=""+this.gameCtl.ballScore,this.addBallLb.node.active=this.gameCtl.addBallNum>0,this.gameCtl.addBallNum>0&&(this.addBallLb.string=" +"+this.gameCtl.addBallNum)},setBallNumber:function(e){this.ballNumberLb.string=""+e},setBallScore:function(e){this.ballScoreLb.string=""+e},setAddBallScore:function(e){this.addBallLb.node.active=e>0,e>0&&(this.addBallLb.string=" +"+e)}}),cc._RF.pop()},{}],Ball:[function(e,t,i){"use strict";cc._RF.push(t,"a7e1ax2SlNJdJeSyaZT358H","Ball"),cc.Class({extends:cc.Component,properties:{},init:function(e){this.gameCtl=e,this.ballSplitNum=0,this.bIsContact=!1},onBeginContact:function(e,t,i){switch(i.tag){case 0:this.bIsContact=!0,this.gameCtl.onBallContactDefault(t.node,i.node);break;case 1:this.bIsContact=!0,this.gameCtl.onBallContactWall(t.node,i.node);break;case 2:this.gameCtl.onBallContactGround(t.node,i.node);break;case 3:this.gameCtl.onBallContactOutWall(t.node,i.node);break;case 4:this.gameCtl.onBallContactGeometry(t.node,i.node);break;case 5:this.gameCtl.onBallContactAddBall(t.node,i.node);break;case 6:this.gameCtl.onBallContactLargenBall(t.node,i.node);break;case 7:this.gameCtl.onBallContactMonster(t.node,i.node)}},onEndContact:function(e,t,i){switch(i.tag){case 4:this.gameCtl.onBallContactEndGeometry(t.node,i.node);break;case 6:this.gameCtl.onBallContactLargenEndBall(t.node,i.node)}}}),cc._RF.pop()},{}],Config:[function(e,t,i){"use strict";cc._RF.push(t,"dac3579fCNCG7E04GbL3sDL","Config"),Object.defineProperty(i,"__esModule",{value:!0});var a={saveSetting:function(e){cc.sys.localStorage.setItem("settingData",JSON.stringify(e))},getSetting:function(){var e=cc.sys.localStorage.getItem("settingData");return""==e?"":JSON.parse(e)},saveSignIn:function(e){cc.sys.localStorage.setItem("signInData",JSON.stringify(e))},getSignIn:function(){var e=cc.sys.localStorage.getItem("signInData");return""==e?"":JSON.parse(e)}};i.config=a,cc._RF.pop()},{}],GameBox:[function(e,t,i){"use strict";cc._RF.push(t,"7497aA/QD9BR6Lz1VKK65rO","GameBox");var a=e("LoadResLayer");cc.Class({extends:cc.Component,properties:{lbBoxBallNum:cc.Label,gameCtl:null,imgPath:""},init:function(e,t){e&&(this.gameCtl=e),t&&(this.loginLayer=t),this.lbBoxBallNum.string="\u5b9d\u7bb1\u5269\u4f59"+window.boxBallNum+"\u7403",window.curTime=0},onBtnClick:function(e){var t=e.target;if("btnClose"===t.name)this.node.destroy();else if("btnShare"===t.name)this.weixinShare();else if("btnVideo"===t.name&&window.boxBallNum>=5){var i=Date.now();i-window.curTime>=18e4&&(window.boxBallNum-=5,window.ballNum+=5,this.lbBoxBallNum.string="\u5b9d\u7bb1\u5269\u4f59"+window.boxBallNum+"\u7403",this.gameCtl&&(this.gameCtl.bIsStartBall?(this.gameCtl.ballNumber+=5,this.gameCtl.ballManage.setBallNumber(this.gameCtl.ballNumber)):this.gameCtl.gameBoxNum+=5),this.loginLayer&&this.loginLayer.setBoxBallNum(),window.curTime=i)}},weixinShare:function(){var e=this;this.gameCtl.getRandomShare();if(window.boxBallNum>=10){var t=Date.now();t-window.curTime>=18e4&&(window.boxBallNum-=10,window.ballNum+=10,e.lbBoxBallNum.string="\u5b9d\u7bb1\u5269\u4f59"+window.boxBallNum+"\u7403",e.gameCtl&&(e.gameCtl.bIsStartBall?(e.gameCtl.ballNumber+=10,e.gameCtl.ballManage.setBallNumber(e.gameCtl.ballNumber)):e.gameCtl.gameBoxNum+=10),e.loginLayer&&e.loginLayer.setBoxBallNum(),window.curTime=t)}else window.boxBallNum>=10?a.loadResLayer.prototype.addSystemTip("\u52a0\u7403\u5df2\u8fbe\u5230\u4e0a\u9650"):a.loadResLayer.prototype.addSystemTip("\u5b9d\u7bb1\u5269\u4f59\u7403\u4e0d\u591f")}}),cc._RF.pop()},{LoadResLayer:"LoadResLayer"}],GameCtl:[function(e,t,i){"use strict";cc._RF.push(t,"280c3rsZJJKnZ9RqbALVwtK","GameCtl");var a=e("LoadResLayer"),o=e("GameTools"),n=e("userManager"),s=e("Config"),l=["\u8d85\u597d\u73a9\u7684\u5f39\u4e00\u5f39\u6d88\u9664\u6e38\u620f\uff0c\u53ea\u4e3a\u5e26\u4f60\u56de\u5fc6\u7ae5\u8da3\u65f6\u5149\u3002","\u6765\u56de\u78d5\u78d5\u78b0\u78b0\u3001\u5c42\u5c42\u8dcc\u8dcc\u649e\u649e\uff0c\u78b0\u649e\u4e2d\u9690\u85cf\u7740\u65e0\u9650\u53ef\u80fd\u3002","\u4ee5\u4e00\u5f53\u767e\uff01\u5c0f\u5c0f\u5f39\u7403\u4e5f\u6709\u8fdc\u5927\u68a6\u60f3\uff0c\u78b0\u649e\u51fa\u5c5e\u4e8e\u4f60\u7684\u672a\u6765\u3002","\u7531\u5c0f\u53d8\u5927\u3001\u4ece\u6162\u5230\u5feb\u3001\u805a\u5c11\u6210\u591a\uff0c\u5f39\u73e0\u7ed9\u4f60\u6700\u52b1\u5fd7\u7684\u5267\u672c\u3002"];cc.Class({extends:cc.Component,properties:{ballManage:e("BallManage"),geometry:e("Geometry"),gameSkill:e("Skill"),ballPrefab:cc.Prefab,skillPrefab:[cc.Prefab],gameNextLevel:cc.Prefab,gameEndPrb:cc.Prefab,gameMenuPrb:cc.Prefab,selectLevel:cc.Prefab,gameBox:cc.Prefab,gameAD:cc.Prefab,gameGold:cc.Prefab,gameProperty:cc.Prefab,gamePiaofen:cc.Prefab,gameTest:cc.Prefab,monster:cc.Node,gameContent:cc.Node,ballParent:cc.Node,effectNode:cc.Node,effectPrb:[cc.Prefab],ballLink:cc.Node,ranking:cc.Sprite,lbGuanqia:cc.Label,lbTargetGold:cc.Label,nodeRole:cc.Node},onLoad:function(){var e=cc.view.getVisibleSize().width/cc.view.getVisibleSize().height,t=this.node.getComponent(cc.Canvas),i=e>1.775;if(t.fitWidth=!i,t.fitHeight=i,window.bIsIPhoneX){var a=this.gameContent.getChildByName("Wall"),o=this.gameContent.getChildByName("topWall");a.runAction(cc.moveTo(.01,cc.v2(a.x,a.y+40))),o.runAction(cc.moveTo(.01,cc.v2(o.x,o.y+1)));var n=this.node.getChildByName("background").getChildByName("feidie");n.runAction(cc.moveTo(.01,cc.v2(n.x,n.y-25)))}cc.director.getPhysicsManager().enabled=!0,this.enemyPool=new cc.NodePool;for(var s=0;s<200;++s){var l=cc.instantiate(this.ballPrefab);this.enemyPool.put(l)}this.goldPool=new cc.NodePool;for(var r=0;r<60;r++){var c=cc.instantiate(this.gameGold);this.goldPool.put(c)}this.init(),t.alignWithScreen()},init:function(){this.userInfo=n.UserManager,this.readData(),this.ballNumber=window.ballNum,this.rollbackNum=0,this.ballScore=this.userInfo.ballScore,this.goldNum=this.userInfo.goldNum,this.curGoldNum=0,this.splitBallNum=0,this.addBallNum=0,this.tempAddBall=0,this.bIsStartBall=!0,this.serveSpeed=100,this.doubleNum=0,this.splitProbBallNum=0,this.getGoldProbability=.4,this.gameBoxNum=0,this.topsNum=this.userInfo.tops,this.nextTopsNum=0,this.bIsRefresh=!1,this.bIsHitBoss=!1,this.bIsGuanqia=!1,this.tempLevelNum=0,this.bIsHundred=!1,this.isTestOpen=!1,this.bCurSkill=new Array,this.bNextSkill=new Array;for(var e=0;e<3;e++)this.bCurSkill[e]=!1,this.bNextSkill[e]=!1;this.gameContent.on(cc.Node.EventType.TOUCH_START,function(e){this.touchStart(e)}.bind(this),this),this.gameContent.on(cc.Node.EventType.TOUCH_MOVE,function(e){this.touchMove(e)}.bind(this),this),this.gameContent.on(cc.Node.EventType.TOUCH_END,function(e){this.touchEnd(e)}.bind(this),this),this.geometry.clearGeometry(),this.setTopsBallNum(),this.ballManage.init(this),this.ballManage.setBallNumber(this.ballNumber),this.geometry.init(this),this.gameSkill.init(this),this.gameSkill.onBtnClick=this.skillClick.bind(this),this.lbGuanqia.string=this.userInfo.guanqiaNum,this.lbTargetGold.string=this.userInfo.score+"\u5206";for(var t=0;t<3;++t)0===this.userInfo.skillNum[t]&&this.setSkillBtnState(t);if(this.isTestOpen){var i=cc.instantiate(this.gameTest);this.node.addChild(i),i.getComponent("Test").init(this)}},readData:function(){var e=s.config.getSetting();if(""!=e&&null!=e&&void 0!=e){e.highguanqiaNum||(e.highguanqiaNum=1),this.userInfo.highguanqiaNum=e.highguanqiaNum,this.userInfo.guanqiaNum=e.highguanqiaNum,e.highguanqiaNum?(this.userInfo.grade=e.grade,this.userInfo.goldNum=e.goldNum,this.userInfo.skillNum=e.skillNum):(this.userInfo.grade=[1,1,1,1,1,1],this.userInfo.goldNum=100,this.userInfo.skillNum=[2,2,2]),e.bHundredBoss?this.bHundredBoss=e.bHundredBoss:this.bHundredBoss=!1,this.userInfo.guanqiaNum>1&&(this.userInfo.setUserInfo(),this.userInfo.ballScore=this.userInfo.getFrontIntNum());for(var t=0;t<6;t++)this.userInfo.initEquipGrade(t,this.userInfo.grade[t])}this.userInfo.goldNum+=window.awardGoldNum;for(var i=0;i<3;++i)this.userInfo.skillNum[i]+=window.awardSkillNum[i]},saveData:function(){var e={};e.goldNum=this.goldNum,e.grade=this.userInfo.grade,e.highguanqiaNum=this.userInfo.highguanqiaNum,e.skillNum=this.gameSkill.skillNum,this.bHundredBoss&&(e.bHundredBoss=this.bHundredBoss),s.config.saveSetting(e),o.GameTools.submitScore(this.ballScore)},clearData:function(){this.userInfo.goldNum=100,this.userInfo.grade=[1,1,1,1,1,1],this.userInfo.guanqiaNum=1,this.userInfo.highguanqiaNum=1,this.userInfo.ballScore=0,this.userInfo.setUserInfo();for(var e=0;e<6;e++)this.userInfo.setDetailVal(e);this.userInfo.skillNum=[2,2,2];s.config.saveSetting(null),s.config.saveSignIn(null)},initOneBall:function(e,t,i,a,o){var n=null;this.enemyPool.size()<=0&&cc.log("\u5b9e\u4f8b\u5316\u7403"),(n=this.enemyPool.size()>0?this.enemyPool.get():cc.instantiate(this.ballPrefab)).position=void 0!=i?cc.v2(i.x,i.y):cc.v2(0,-16),n.color=t,n.getComponent(cc.RigidBody).gravityScale=void 0!=a?a:1,n.scale=void 0!=o?o:this.userInfo.bottoms/10,n.getComponent(cc.RigidBody).linearVelocity=e,n.parent=this.ballParent,n.getComponent("Ball").init(this)},initSkill:function(e,t,i){var a=cc.instantiate(this.skillPrefab[e]);this.ballParent.addChild(a),t&&(a.getComponent(cc.RigidBody).linearVelocity=t),i&&a.setPosition(i),a.getComponent("boom").init(this)},onBallKill:function(e){this.enemyPool.put(e)},initGold:function(e,t,i,a){var o=null;this.goldPool.size()<=0&&cc.log("\u5b9e\u4f8b\u5316\u91d1\u5e01"),o=this.goldPool.size()>0?this.goldPool.get():cc.instantiate(this.gameGold),this.effectNode.addChild(o);var n=Math.ceil(50*Math.random())-25;o.setPosition(e+n,t);var s=this.nodeRole.convertToWorldSpaceAR(cc.v2(0,0)),l=o.convertToWorldSpaceAR(cc.v2(0,0)),r=s.x-l.x,c=s.y-l.y;o.runAction(cc.sequence(cc.delayTime(.3),cc.moveTo(1,cc.v2(o.x+r,o.y+c)),cc.delayTime(.3),cc.callFunc(function(){if(this.onGoldKill(o),i){var e=cc.instantiate(this.gamePiaofen);this.nodeRole.addChild(e),e.getComponent(cc.Label).string="+"+a,e.runAction(cc.sequence(cc.moveTo(.5,cc.v2(e.x,130)),cc.fadeOut(.3),cc.callFunc(function(){return e.destroy()})))}}.bind(this))))},onGoldKill:function(e){this.goldPool.put(e)},revive:function(){this.geometry.revive()},onBallContactDefault:function(e,t){e.getComponent("Ball").bIsContact&&(e.getComponent(cc.RigidBody).gravityScale=8)},onBallContactWall:function(e,t){e.getComponent("Ball").bIsContact&&(e.getComponent(cc.RigidBody).gravityScale=8)},onBallContactGround:function(e,t){e.getComponent(cc.RigidBody).gravityScale=800;var i=e.x>=0?292:-292;e.getComponent(cc.RigidBody).linearVelocity=cc.v2(i,-850)},onBallContactOutWall:function(e,t){if(0==e.getComponent(cc.PhysicsCircleCollider).sensor){e.getComponent(cc.PhysicsCircleCollider).sensor=!0,e.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,0),e.getComponent(cc.RigidBody).gravityScale=0;var i=cc.callFunc(function(){e.getComponent(cc.PhysicsCircleCollider).sensor=!1,e.color=cc.Color.WHITE,this.onBallKill(e),this.rollbackNum++,this.ballNumber+this.splitBallNum+this.addBallNum+this.doubleNum+this.splitProbBallNum==this.rollbackNum&&this.gameEnd()}.bind(this));e.runAction(cc.sequence(cc.moveTo(.3,cc.v2(e.x,600)),i))}},onBallContactGeometry:function(e,t){this.ballScore+=Math.random()<this.userInfo.belt/100?4:2,this.ballManage.setBallScore(this.ballScore),this.ballScore>=this.userInfo.score&&(this.bIsGuanqia=!0);var i=t.parent,a=i.getComponent("GeometryItem");a.clickNum--,a.clickNum>=0&&a.setGeometryNum(a.clickNum),e.getComponent(cc.RigidBody).gravityScale=8;var o=i.parent;if(0==a.clickNum){if(Math.random()<this.getGoldProbability){var n=t.convertToWorldSpaceAR(cc.v2(0,0)),s=this.effectNode.convertToWorldSpaceAR(cc.v2(0,0)),l=n.x-s.x,r=n.y-s.y,c=Math.ceil(20*Math.random())+90,h=Math.round(this.userInfo.dropGold*c/100);this.curGoldNum+=h,this.goldNum+=h;for(var d=Math.ceil(10*Math.random()),m=0;m<d;m++)this.initGold(l,r,m==d-1,h)}this.geometry.onGeometryKill(i),o&&0==o.childrenCount&&this.geometry.onGeometryLayoutKill(o)}else{var u=t.x;t.stopAllActions(),t.runAction(cc.sequence(cc.moveTo(.05,cc.v2(u,-3)),cc.moveTo(.05,cc.v2(u,0))))}},onBallContactEndGeometry:function(e,t){var i=e.getComponent(cc.RigidBody).linearVelocity;e.getComponent(cc.RigidBody).linearVelocity=cc.v2(i.x+25,i.y);var a=(i=e.getComponent(cc.RigidBody).linearVelocity).x-e.x,o=i.y-e.y,n=Math.abs(a),s=Math.abs(o),l=Math.sqrt(n*n+s*s);if((l<800?(e.getComponent(cc.RigidBody).linearVelocity=cc.v2(2*i.x,2*i.y),e.getComponent(cc.RigidBody).gravityScale=5):l>1800&&(e.getComponent(cc.RigidBody).linearVelocity=cc.v2(.8*i.x,.8*i.y)),!cc.Color.YELLOW.equals(e.color)&&e.getComponent("Ball").ballSplitNum<3)&&Math.random()<this.userInfo.weapon/100){this.splitProbBallNum++,e.getComponent("Ball").ballSplitNum++;var r=e.getComponent(cc.RigidBody).linearVelocity;r.x=-r.x;var c=cc.Color.YELLOW;this.initOneBall(r,c,cc.v2(e.x,e.y),e.getComponent(cc.RigidBody).gravityScale)}},onBallContactAddBall:function(e,t){this.tempAddBall++,e.getComponent(cc.RigidBody).gravityScale=8;var i=t._parent,a=i.parent;this.geometry.onGeometryKill(i),a&&0==a.childrenCount&&this.geometry.onGeometryLayoutKill(a)},onBallContactLargenBall:function(e,t){this.splitBallNum++,e.getComponent(cc.RigidBody).gravityScale=8;var i=t._parent,a=i.parent;this.geometry.onGeometryKill(i),a&&0==a.childrenCount&&this.geometry.onGeometryLayoutKill(a)},onBallContactLargenEndBall:function(e,t){var i=e.getComponent(cc.RigidBody).linearVelocity;i.x=-i.x;var a=cc.Color.YELLOW;this.initOneBall(i,a,cc.v2(e.x,e.y),e.getComponent(cc.RigidBody).gravityScale)},onBallContactMonster:function(e,t){var i=Math.random();if(e.getComponent(cc.RigidBody).gravityScale=8,i<.2){var a=t.getChildByName("danzhu_qi"),o=t.getChildByName("danzhu_qi2");i<.1?a.active||(a.active=!0,a.runAction(cc.sequence(cc.fadeIn(.3),cc.delayTime(.2),cc.fadeOut(.3),cc.callFunc(function(){return a.active=!1})))):o.active||(o.active=!0,o.runAction(cc.sequence(cc.fadeIn(.3),cc.delayTime(.2),cc.fadeOut(.3),cc.callFunc(function(){return o.active=!1}))));var n=(Math.ceil(20*Math.random())+10)/100,s=Math.ceil(n*this.randomGold);if(this.randomGold>0){var l=e.convertToWorldSpaceAR(cc.v2(0,0)),r=this.effectNode.convertToWorldSpaceAR(cc.v2(0,0)),c=l.x-r.x,h=l.y-r.y;0==s?(s=this.randomGold,this.randomGold-=s):this.randomGold>s?this.randomGold-=s:(s=this.randomGold,this.randomGold-=s);for(var d=Math.ceil(3*Math.random()),m=0;m<d;m++)this.initGold(c,h,m==d-1,s)}0==this.randomGold&&t.runAction(cc.sequence(cc.delayTime(.8),cc.moveTo(1,cc.v2(t.x,-1100)),cc.callFunc(function(){t.active=!1})))}},setPiaofen:function(e){var t=cc.instantiate(this.gamePiaofen);this.nodeRole.addChild(t),t.getComponent(cc.Label).string="+"+e,this.curGoldNum+=e,this.goldNum+=e,t.runAction(cc.sequence(cc.moveTo(.5,cc.v2(t.x,130)),cc.fadeOut(.3),cc.callFunc(function(){return t.destroy()})))},onLaserContactWall:function(e,t){e.destroy()},onLaserContactGeometry:function(e,t){"addBall"!=t.parent.name&&"largenBall"!=t.parent.name&&(this.ballScore+=t.parent.getComponent("GeometryItem").clickNum,this.ballManage.setBallScore(this.ballScore),this.ballScore>=this.userInfo.score&&(this.bIsGuanqia=!0));var i=t._parent,a=i.parent;this.geometry.onGeometryKill(i),a&&0==a.childrenCount&&this.geometry.onGeometryLayoutKill(a),this.curLinearVelocity=e.getComponent(cc.RigidBody).linearVelocity;var o=e.convertToWorldSpaceAR(cc.v2(0,0)),n=this.ballParent.convertToWorldSpaceAR(cc.v2(0,0)),s=o.x-n.x,l=o.y-n.y;e.destroy(),this.initSkill(0,this.curLinearVelocity,cc.v2(s,l))},onLaserContactEndGeometry:function(e,t){},onBoomContactWall:function(e,t){var i=e.convertToWorldSpaceAR(cc.v2(0,0)),a=this.ballParent.convertToWorldSpaceAR(cc.v2(0,0)),o=i.x-a.x,n=i.y-a.y;e.destroy();var s=this,l=cc.instantiate(s.effectPrb[2]);s.effectNode.addChild(l),l.runAction(cc.moveTo(.01,e.getPosition())),s.initSkill(2,null,cc.v2(o,n));var r=setInterval(function(){s.bCurSkill[2]=!1,s.bIsGuanqia?s.gameEnd():s.initNewGame(),clearInterval(r)},500)},onBoomCopyContactGeometry:function(e,t){"addBall"!=t.parent.name&&"largenBall"!=t.parent.name&&(this.ballScore+=t.parent.getComponent("GeometryItem").clickNum,this.ballManage.setBallScore(this.ballScore),this.ballScore>=this.userInfo.score&&(this.bIsGuanqia=!0)),e.destroy();var i=t._parent,a=i.parent;this.geometry.onGeometryKill(i),a&&0==a.childrenCount&&this.geometry.onGeometryLayoutKill(a)},touchStart:function(e){this.setAngle(e)},touchMove:function(e){this.setAngle(e)},setAngle:function(e){if(this.bIsStartBall){this.ballLink.active=!0;var t=e.touch._point,i=this.ballLink.convertToWorldSpaceAR(cc.v2(0,0)),a=t.x-i.x,o=t.y-i.y,n=Math.abs(a),s=Math.abs(o),l=Math.sqrt(n*n+s*s);this.ballLink.height=parseInt(l)+20;var r=Math.round(Math.asin(s/l)/Math.PI*180);r<=10&&(r=10),0==a?this.ballLink.rotation=0:a>0?this.ballLink.rotation=-(90-r):a<0&&(this.ballLink.rotation=90-r);var c=Math.abs(this.ballLink.rotation);0!=this.ballLink.rotation?this.ballLink.getComponent(cc.Layout).spacingY=23-6*c/80:this.ballLink.getComponent(cc.Layout).spacingY=23}},touchEnd:function(e){var t=this;if(t.bIsStartBall){t.bIsStartBall=!1,t.ballLink.active=!1;var i=e.touch._point,a=t.ballLink.convertToWorldSpaceAR(cc.v2(0,0)),o=i.x-a.x,n=i.y-a.y,s=(n=(n=n>-1?-1:n)<-1500?-1500:n)*(-1500/n),l=o*(-1500/n),r=Math.abs(l),c=Math.abs(s),h=Math.sqrt(r*r+c*c);if(h>1500){var d=h/1500;s/=d,l/=d}if(this.bCurSkill[2]){var m=cc.instantiate(t.effectPrb[1]);t.effectNode.addChild(m),m.getComponent("boom").init(this),m.getComponent(cc.RigidBody).linearVelocity=cc.v2(l,s)}else if(this.bCurSkill[1]){t.initSkill(0,cc.v2(2*l,2*s));var u=cc.instantiate(t.effectPrb[0]);t.effectNode.addChild(u),u.rotation=t.ballLink.rotation;var g=setInterval(function(){u.destroy(),t.bCurSkill[1]=!1,t.bIsGuanqia?t.gameEnd():t.initNewGame(),clearInterval(g)},1100)}else{if(t.doubleNum<=0)Math.random()<t.userInfo.head/100&&(t.doubleNum=t.ballNumber,t.ballManage.setBallNumber(t.ballNumber+t.doubleNum));var p=0,f=setInterval(function(){p++,t.ballManage.setBallNumber(t.ballNumber+t.doubleNum-p+t.addBallNum);var e=p>t.ballNumber+t.addBallNum?cc.Color.RED:cc.Color.WHITE;t.initOneBall(cc.v2(l*(1+t.userInfo.grade[5]/200),s*(1+t.userInfo.grade[5]/200)),e),p==t.ballNumber+t.doubleNum+t.addBallNum&&(t.ballManage.setAddBallScore(0),clearInterval(f))},t.serveSpeed)}}},showBox:function(){var e=cc.instantiate(this.gameBox);this.node.addChild(e),e.getComponent("GameBox").init(this)},skillClick:function(e){var t=e.target.name;if("speedup"===t){var i=cc.instantiate(this.gameProperty);this.node.addChild(i),i.getComponent("GameProperty").init(this)}else if("doubleSkill"===t)this.gameSkill.skillNum[0]<=0?a.loadResLayer.prototype.addSystemTip("\u6682\u65e0\u53ef\u7528\u6b21\u6570"):this.getRestBtnState(0)?a.loadResLayer.prototype.addSystemTip("\u60a8\u6b63\u5728\u4f7f\u7528\u5176\u4ed6\u6280\u80fd"):this.gameSkill.skillNum[0]>0&&!this.bCurSkill[0]&&!this.bNextSkill[0]&&this.bIsStartBall&&(a.loadResLayer.prototype.addSystemTip("\u60a8\u4f7f\u7528\u4e86\u53cc\u500d\u7403\u7403"),this.gameSkill.skillNum[0]--,this.bCurSkill[0]=!0,this.doubleNum=this.bCurSkill[0]?this.ballNumber:0,this.ballManage.setBallNumber(this.ballNumber+this.doubleNum),0===this.gameSkill.skillNum[0]&&this.setSkillBtnState(0));else if("laserSkill"===t)this.gameSkill.skillNum[1]<=0?a.loadResLayer.prototype.addSystemTip("\u6682\u65e0\u53ef\u7528\u6b21\u6570"):this.getRestBtnState(1)?a.loadResLayer.prototype.addSystemTip("\u60a8\u6b63\u5728\u4f7f\u7528\u5176\u4ed6\u6280\u80fd"):this.gameSkill.skillNum[1]>0&&!this.bCurSkill[1]&&!this.bNextSkill[1]&&this.bIsStartBall&&(a.loadResLayer.prototype.addSystemTip("\u60a8\u4f7f\u7528\u4e86\u6fc0\u5149"),this.gameSkill.skillNum[1]--,this.bCurSkill[1]=!0,0===this.gameSkill.skillNum[1]&&this.setSkillBtnState(1));else if("boomSkill"===t)this.gameSkill.skillNum[2]<=0?a.loadResLayer.prototype.addSystemTip("\u6682\u65e0\u53ef\u7528\u6b21\u6570"):this.getRestBtnState(2)?a.loadResLayer.prototype.addSystemTip("\u60a8\u6b63\u5728\u4f7f\u7528\u5176\u4ed6\u6280\u80fd"):this.gameSkill.skillNum[2]>0&&!this.bCurSkill[2]&&!this.bNextSkill[2]&&this.bIsStartBall&&(a.loadResLayer.prototype.addSystemTip("\u60a8\u4f7f\u7528\u4e86\u70b8\u5f39"),this.gameSkill.skillNum[2]--,this.bCurSkill[2]=!0,0===this.gameSkill.skillNum[2]&&this.setSkillBtnState(2));else if("chearSkill"===t){var o=cc.instantiate(this.selectLevel);this.node.addChild(o),o.getComponent("SelectLevel").init(this)}},getRestBtnState:function(e){return 0==e?this.bCurSkill[1]||this.bNextSkill[1]||this.bCurSkill[2]||this.bNextSkill[2]:1==e?this.bCurSkill[0]||this.bNextSkill[0]||this.bCurSkill[2]||this.bNextSkill[2]:2==e?this.bCurSkill[0]||this.bNextSkill[0]||this.bCurSkill[1]||this.bNextSkill[1]:void 0},setSkillBtnState:function(e){var t=this.node.getChildByName("skill").getChildByName("skillLayout");0===e?t.getChildByName("doubleSkill").getComponent(cc.Button).interactable=!1:1===e?t.getChildByName("laserSkill").getComponent(cc.Button).interactable=!1:2===e&&(t.getChildByName("boomSkill").getComponent(cc.Button).interactable=!1)},onButtonClick:function(e){var t=e.target;if("menu"===t.name){var i=cc.instantiate(this.gameMenuPrb);this.node.addChild(i),i.getComponent("GameMenu").init(this)}else if("adBtn"===t.name){this.getRandomShare();window.shareThreeNum<3&&window.shareThreeNum++}else"shareBtn"===t.name&&this.showBox()},getRandomShare:function(){var e=Math.floor(4*Math.random());return l[e]},gameEnd:function(){var e=this,t=this;if(t.endDataInit(),this.bIsGuanqia)if(this.userInfo.highguanqiaNum!=this.userInfo.guanqiaNum||this.userInfo.guanqiaNum%5!=0||this.bIsHitBoss||this.bHundredBoss){this.bIsHitBoss&&(this.bIsHitBoss=!1);var i=cc.instantiate(this.gameNextLevel);this.node.addChild(i),i.getComponent("GameNextLevel").init(this)}else 100==this.userInfo.highguanqiaNum&&(this.bHundredBoss=!0),this.bIsHitBoss=!0,this.monster.active=!0,this.monster.stopAllActions(),this.monster.y=-1100,this.geometry.clearGeometry(),this.monster.runAction(cc.sequence(cc.moveTo(1,cc.v2(this.monster.x,-700)),cc.callFunc(function(){t.bIsStartBall=!0,t.rollbackNum=0;var i=2+Math.random();t.randomGold=parseInt(e.userInfo.dropGold*i)})));else this.initNewGame()},endDataInit:function(){for(var e=0;e<this.ballParent.childrenCount;e++){var t=this.ballParent._children[e];this.onBallKill(t)}this.rollbackNum=0,this.splitBallNum=0,this.tempAddBall>0&&(this.addBallNum+=this.tempAddBall,this.tempAddBall=0),this.ballManage.setAddBallScore(this.addBallNum),this.ballManage.setBallNumber(this.ballNumber),this.doubleNum=0,this.splitProbBallNum=0;for(var i=0;i<3;i++)this.bCurSkill[i]=!1,this.bNextSkill[i]&&(this.bNextSkill[i]=!1,this.bCurSkill[i]=!0,0==i&&(this.doubleNum=this.bCurSkill[0]?this.ballNumber:0,this.ballManage.setBallNumber(this.ballNumber+this.doubleNum)))},initNewGame:function(){if(this.bIsStartBall=!0,this.geometry.initGeometry(),this.geometry.getGameIsEnd()){var e=cc.instantiate(this.gameEndPrb);this.node.addChild(e),e.getComponent("GameEnd").init(this)}this.gameBoxNum>0&&(this.ballNumber+=this.gameBoxNum,this.ballManage.setBallNumber(this.ballNumber),this.gameBoxNum=0),this.setTopsBallNum()},setTopsBallNum:function(){this.topsNum>0&&(this.ballNumber+=this.topsNum-this.nextTopsNum,this.nextTopsNum=0,this.ballManage.setBallNumber(this.ballNumber),this.topsNum=0)},setGuanqia:function(){this.bIsGuanqia=!1,this.addBallNum=0,this.ballManage.setAddBallScore(0),100==this.userInfo.guanqiaNum&&this.bIsHundred&&(this.userInfo.guanqiaNum=1,this.userInfo.score=0,this.ballScore=0,this.ballManage.setBallScore(this.ballScore)),this.userInfo.setUserInfo(),this.lbGuanqia.string=this.userInfo.guanqiaNum,this.lbTargetGold.string=this.userInfo.score+"\u5206",this.geometry.clearGeometry(),this.initNewGame()}}),cc._RF.pop()},{BallManage:"BallManage",Config:"Config",GameTools:"GameTools",Geometry:"Geometry",LoadResLayer:"LoadResLayer",Skill:"Skill",userManager:"userManager"}],GameEnd:[function(e,t,i){"use strict";cc._RF.push(t,"004a03VlthKsJIa1tZH/W/e","GameEnd");var a=e("LoadResLayer"),o=e("GameTools");cc.Class({extends:cc.Component,properties:{guanqia:cc.Label,endScore:cc.Label,endGold:cc.Label},onLoad:function(){},init:function(e){this.gameCtl=e,this.guanqia.string="\u5173\u5361"+this.gameCtl.userInfo.guanqiaNum,this.endScore.string=this.gameCtl.ballScore,this.endGold.string=this.gameCtl.curGoldNum,o.GameTools.submitScore(this.gameCtl.ballScore),this.gameCtl.saveData()},onBtnClick:function(e){var t=e.target;"gameVideo"===t.name?(this.node.destroy(),cc.director.loadScene("Login")):"againGame"===t.name?(this.gameCtl.setGuanqia(),this.gameCtl.bIsGuanqia=!1,this.gameCtl.ballScore=this.gameCtl.userInfo.guanqiaNum>=2?this.gameCtl.userInfo.getFrontIntNum():0,this.gameCtl.ballManage.setBallScore(this.gameCtl.ballScore),this.node.destroy()):"gameShare"===t.name&&this.share()},share:function(){this.gameCtl.userInfo.reviveNum>0?(this.gameCtl.userInfo.reviveNum--,this.gameCtl.revive(),this.node.destroy()):a.loadResLayer.prototype.addSystemTip("\u590d\u6d3b\u6b21\u6570\u5df2\u7528\u5b8c")}}),cc._RF.pop()},{GameTools:"GameTools",LoadResLayer:"LoadResLayer"}],GameMenu:[function(e,t,i){"use strict";cc._RF.push(t,"422b2Yeg7JOiauXUNagC2O8","GameMenu");e("LoadResLayer");cc.Class({extends:cc.Component,properties:{gameRule:cc.Prefab},onLoad:function(){},init:function(e){this.gameCtl=e},onBtnClick:function(e){var t=e.target;if("backGame"===t.name)this.gameCtl.saveData(),cc.director.loadScene("Login");else if("continueGame"===t.name)this.node.destroy();else if("gameRule"===t.name){var i=cc.instantiate(this.gameRule);this.node.addChild(i)}}}),cc._RF.pop()},{LoadResLayer:"LoadResLayer"}],GameNextLevel:[function(e,t,i){"use strict";cc._RF.push(t,"0d607BgLF5CQocXDnkoyQ9E","GameNextLevel");e("LoadResLayer");var a=e("GameTools");cc.Class({extends:cc.Component,properties:{guanqia:cc.Label,endScore:cc.Label,endGold:cc.Label,guanqiaLb:cc.Label},onLoad:function(){},init:function(e){this.gameCtl=e,this.guanqia.string="\u5173\u5361"+this.gameCtl.userInfo.guanqiaNum,this.endScore.string=this.gameCtl.ballScore,this.endGold.string=this.gameCtl.curGoldNum,a.GameTools.submitScore(this.gameCtl.ballScore),this.gameCtl.userInfo.guanqiaNum<100?this.gameCtl.userInfo.guanqiaNum++:(this.gameCtl.bIsHundred=!0,this.guanqiaLb.string="\u5faa\u73af\u5f00\u59cb\u7b2c\u4e00\u5173"),this.gameCtl.userInfo.guanqiaNum>this.gameCtl.userInfo.highguanqiaNum&&(this.gameCtl.userInfo.highguanqiaNum=this.gameCtl.userInfo.guanqiaNum),this.gameCtl.saveData()},onBtnClick:function(e){var t=e.target;"gameVideo"===t.name?(this.node.destroy(),cc.director.loadScene("Login")):"gameShare"===t.name&&(this.gameCtl.setGuanqia(),this.gameCtl.bIsGuanqia=!1,this.node.destroy())}}),cc._RF.pop()},{GameTools:"GameTools",LoadResLayer:"LoadResLayer"}],GameProperty:[function(e,t,i){"use strict";cc._RF.push(t,"ae7725ZvgZJbJYbEYxXk2wf","GameProperty");var a=e("LoadResLayer"),o=e("GameTools"),n=["\u6b66\u5668\uff1a\u589e\u52a0\u9b54\u529b\u7403\u7684\u5206\u88c2\u6982\u7387","\u5934\u80a9\uff1a\u63d0\u9ad8\u53cc\u500d\u9b54\u529b\u7403\u7684\u89e6\u53d1\u6982\u7387","\u4e0a\u88c5\uff1a\u589e\u52a0\u9b54\u529b\u7403\u7684\u6570\u91cf","\u4e0b\u88c5\uff1a\u589e\u52a0\u9b54\u529b\u7403\u7684\u5c3a\u5bf8","\u8170\u5e26\uff1a\u589e\u52a0\u9b54\u529b\u7403\u7684\u53cc\u500d\u5f97\u5206\u6982\u7387","\u978b\u5b50\uff1a\u589e\u52a0\u9b54\u529b\u7403\u7684\u79fb\u52a8\u901f\u5ea6"],s=["\u6b66\u5668","\u5934\u80a9","\u4e0a\u88c5","\u4e0b\u88c5","\u8170\u5e26","\u978b\u5b50"];cc.Class({extends:cc.Component,properties:{lbGold:cc.Label,nodeProperty:[cc.Node],lbProperty:[cc.Label],spProperty:[cc.Node],upgradePfb:cc.Prefab,upgradeGold:cc.Node,lbDetail:cc.Label},onLoad:function(){},start:function(){this.goldValue=this.gameCtl.goldNum,this.lbGold.string=this.goldValue,this.bIsDetail=this.gameCtl.userInfo.bIsDetail,this.lbGrade=new Array,this.spBorder=new Array,this.spUpgrade=new Array;for(var e=0;e<6;e++){var t=this.nodeProperty[e],i=new cc.Component.EventHandler;i.target=this.node,i.component="GameProperty",i.handler="propertyClick",i.customEventData=e,t.getComponent(cc.Button).clickEvents.push(i)}for(var a=0;a<6;a++)this.lbGrade[a]=this.nodeProperty[a].getChildByName("dengji"),this.spBorder[a]=this.nodeProperty[a].getChildByName("danzhu_sx_zbkuang2"),this.spUpgrade[a]=this.nodeProperty[a].getChildByName("danzhu_sx_jt");for(var o=0;o<6;o++)this.lbGrade[o].getComponent(cc.Label).string=s[o]+" lv."+this.gameCtl.userInfo.grade[o],this.spBorder[o].active=!1,this.setUpgradeSign(o);this.currentClick=this.gameCtl.userInfo.currentClick,this.propertyClick(null,this.currentClick),this.setDetail()},init:function(e){this.gameCtl=e},onBtnClick:function(e){var t=e.target;if("closeBtn"===t.name)this.gameCtl.userInfo.currentClick=this.currentClick,this.gameCtl.userInfo.bIsDetail=this.bIsDetail,this.node.destroy();else if("upgradeBtn"===t.name){var i=this.gameCtl.userInfo.getEquipGrade(this.currentClick)+1,n=this.gameCtl.userInfo.getNextEquipConsume(this.currentClick);if(i<=2&&this.currentClick>0)switch(this.currentClick){case 1:if(this.gameCtl.userInfo.guanqiaNum<5)return void a.loadResLayer.prototype.addUnlockTip("\u5173\u5361\u8fbe\u52305\u5173\u81ea\u52a8\u89e3\u9501","\u5f53\u524d\u8fdb\u5ea6"+this.gameCtl.userInfo.guanqiaNum+"/5");break;case 2:if(!window.isSignInSevenDays)return void a.loadResLayer.prototype.addUnlockTip("\u7d2f\u8ba1\u7b7e\u52307\u5929\u81ea\u52a8\u89e3\u9501","\u5f53\u524d\u8fdb\u5ea6"+o.GameTools.getTime().length+"/7");break;case 3:if(this.gameCtl.userInfo.guanqiaNum<10)return void a.loadResLayer.prototype.addUnlockTip("\u5173\u5361\u8fbe\u523010\u5173\u81ea\u52a8\u89e3\u9501","\u5f53\u524d\u8fdb\u5ea6"+this.gameCtl.userInfo.guanqiaNum+"/10");break;case 4:if(this.gameCtl.userInfo.guanqiaNum<15)return void a.loadResLayer.prototype.addUnlockTip("\u5173\u5361\u8fbe\u523015\u5173\u81ea\u52a8\u89e3\u9501","\u5f53\u524d\u8fdb\u5ea6"+this.gameCtl.userInfo.guanqiaNum+"/15");break;case 5:for(var l=!0,r=0,c=0;c<this.gameCtl.userInfo.grade.length-1;++c)this.gameCtl.userInfo.grade[c]<2&&(l=!1,r++);if(!l)return void a.loadResLayer.prototype.addUnlockTip("\u5176\u4ed6\u5c5e\u6027\u7b49\u7ea7\u5747\u8fbe\u52302\u7ea7","\u5f53\u524d\u8fdb\u5ea6"+(5-r)+"/5")}if(this.gameCtl.userInfo.grade[this.currentClick]>=100)a.loadResLayer.prototype.addSystemTip("\u88c5\u5907\u7b49\u7ea7\u5df2\u6ee1");else if(this.goldValue>=n){if(2==this.currentClick){var h=this.gameCtl.userInfo.tops,d=this.gameCtl.userInfo.getNextEquipGrade(2);d>h&&(this.gameCtl.bIsStartBall?this.gameCtl.bCurSkill[0]?(this.gameCtl.ballNumber+=d-h,this.gameCtl.doubleNum+=d-h,this.gameCtl.ballManage.setBallNumber(this.gameCtl.ballNumber+this.gameCtl.doubleNum)):(this.gameCtl.ballNumber+=d-h,this.gameCtl.ballManage.setBallNumber(this.gameCtl.ballNumber)):this.gameCtl.topsNum+=d-h)}this.goldValue-=n,this.gameCtl.goldNum-=n,this.lbGold.string=this.goldValue,this.gameCtl.userInfo.setEquipGrade(this.currentClick,1),this.lbGrade[this.currentClick].getComponent(cc.Label).string=s[this.currentClick]+" lv."+i,n=this.gameCtl.userInfo.getNextEquipConsume(this.currentClick),this.setUpgradeGold(n),this.setUpgradeSign(this.currentClick),this.bIsDetail&&this.setUpgradeLabel();var m=cc.instantiate(this.upgradePfb);this.nodeProperty[this.currentClick].addChild(m)}else a.loadResLayer.prototype.addSystemTip("\u91d1\u5e01\u4e0d\u8db3")}else if("onekeyBtn"===t.name){var u=this.gameCtl.userInfo.tops,g=this.gameCtl.userInfo.getEquipGrade(this.currentClick)+1,p=this.gameCtl.userInfo.getNextEquipConsume(this.currentClick);if(g<=2&&this.currentClick>0)switch(this.currentClick){case 1:if(this.gameCtl.userInfo.guanqiaNum<5)return void a.loadResLayer.prototype.addUnlockTip("\u5173\u5361\u8fbe\u52305\u5173\u81ea\u52a8\u89e3\u9501","\u5f53\u524d\u8fdb\u5ea6"+this.gameCtl.userInfo.guanqiaNum+"/5");break;case 2:if(!window.isSignInSevenDays)return void a.loadResLayer.prototype.addUnlockTip("\u7d2f\u8ba1\u7b7e\u52307\u5929\u81ea\u52a8\u89e3\u9501","\u5f53\u524d\u8fdb\u5ea6"+o.GameTools.getTime().length+"/7");break;case 3:if(this.gameCtl.userInfo.guanqiaNum<10)return void a.loadResLayer.prototype.addUnlockTip("\u5173\u5361\u8fbe\u523010\u5173\u81ea\u52a8\u89e3\u9501","\u5f53\u524d\u8fdb\u5ea6"+this.gameCtl.userInfo.guanqiaNum+"/10");break;case 4:if(this.gameCtl.userInfo.guanqiaNum<15)return void a.loadResLayer.prototype.addUnlockTip("\u5173\u5361\u8fbe\u523015\u5173\u81ea\u52a8\u89e3\u9501","\u5f53\u524d\u8fdb\u5ea6"+this.gameCtl.userInfo.guanqiaNum+"/15");break;case 5:for(var f=!0,b=0,C=0;C<this.gameCtl.userInfo.grade.length-1;++C)this.gameCtl.userInfo.grade[C]<2&&(f=!1,b++);if(!f)return void a.loadResLayer.prototype.addUnlockTip("\u5176\u4ed6\u5c5e\u6027\u7b49\u7ea7\u5747\u8fbe\u52302\u7ea7","\u5f53\u524d\u8fdb\u5ea6"+(5-b)+"/5")}if(100==this.gameCtl.userInfo.grade[this.currentClick])a.loadResLayer.prototype.addSystemTip("\u88c5\u5907\u7b49\u7ea7\u5df2\u6ee1");else if(this.goldValue>=p){for(var y=0,v=1,N=g;N<101&&this.goldValue>=y+this.gameCtl.userInfo.getAnyEquipConsume(N);N++)y+=this.gameCtl.userInfo.getAnyEquipConsume(N),v=N;if(2==this.currentClick){var L=this.gameCtl.userInfo.tops,S=this.gameCtl.userInfo.getNextEquipGrade(2,v-1);S>L&&(this.gameCtl.bIsStartBall?this.gameCtl.bCurSkill[0]?(this.gameCtl.ballNumber+=S-L-u,this.gameCtl.doubleNum+=S-L-u,this.gameCtl.ballManage.setBallNumber(this.gameCtl.ballNumber+this.gameCtl.doubleNum)):(this.gameCtl.ballNumber+=S-L-u,this.gameCtl.ballManage.setBallNumber(this.gameCtl.ballNumber)):(this.gameCtl.nextTopsNum=L,this.gameCtl.topsNum+=S-L))}this.goldValue-=y,this.gameCtl.goldNum-=y,this.lbGold.string=this.goldValue,this.gameCtl.userInfo.setEquipGrade(this.currentClick,v-this.gameCtl.userInfo.getEquipGrade(this.currentClick)),this.lbGrade[this.currentClick].getComponent(cc.Label).string=s[this.currentClick]+" lv."+v,p=this.gameCtl.userInfo.getNextEquipConsume(this.currentClick),this.setUpgradeGold(p),this.bIsDetail&&this.setUpgradeLabel();var I=cc.instantiate(this.upgradePfb);this.nodeProperty[this.currentClick].addChild(I)}else a.loadResLayer.prototype.addSystemTip("\u91d1\u5e01\u4e0d\u8db3")}else"detailBtn"===t.name&&(this.bIsDetail=!this.bIsDetail,this.setDetail())},setDetail:function(){if(this.lbDetail.string=this.bIsDetail?"\u88c5\u5907\u4ecb\u7ecd":"\u8be6\u7ec6\u6570\u503c",this.bIsDetail)this.setUpgradeLabel();else for(var e=0;e<6;e++)this.lbProperty[e].string=n[e]},propertyClick:function(e,t){for(var i=0;i<6;i++)this.spBorder[i].active=!1,this.spProperty[i].active=!1,this.lbProperty[i].node.color=cc.color(175,166,255);this.spBorder[t].active=!0,this.spProperty[t].active=!0,this.lbProperty[t].node.color=cc.color(254,220,104),this.currentClick=t;var a=this.gameCtl.userInfo.getNextEquipConsume(this.currentClick);this.setUpgradeGold(a)},setUpgradeGold:function(e){this.upgradeGold.getComponent(cc.Label).string=e>38917?"\u5df2\u6ee1":e,this.node.getChildByName("bg").getChildByName("upgradeBtn").getComponent(cc.Button).interactable=e<=38917,this.node.getChildByName("bg").getChildByName("onekeyBtn").getComponent(cc.Button).interactable=e<=38917},setUpgradeLabel:function(){this.lbProperty[0].string="\u6b66\u5668\uff1a  "+this.gameCtl.userInfo.weapon.toFixed(1)+"% \u4e00> "+this.gameCtl.userInfo.getNextEquipGrade(0),this.lbProperty[1].string="\u5934\u80a9\uff1a  "+this.gameCtl.userInfo.head.toFixed(2)+"% \u4e00> "+this.gameCtl.userInfo.getNextEquipGrade(1),this.lbProperty[2].string="\u4e0a\u88c5\uff1a  "+this.gameCtl.userInfo.tops+" \u4e00> "+this.gameCtl.userInfo.getNextEquipGrade(2),this.lbProperty[3].string="\u4e0b\u88c5\uff1a  "+this.gameCtl.userInfo.bottoms.toFixed(2)+" \u4e00> "+this.gameCtl.userInfo.getNextEquipGrade(3),this.lbProperty[4].string="\u8170\u5e26\uff1a  "+this.gameCtl.userInfo.belt.toFixed(1)+"% \u4e00> "+this.gameCtl.userInfo.getNextEquipGrade(4),this.lbProperty[5].string="\u978b\u5b50\uff1a  "+this.gameCtl.userInfo.shoe+" \u4e00> "+this.gameCtl.userInfo.getNextEquipGrade(5)},setUpgradeSign:function(e){var t=this.gameCtl.userInfo.grade[e];this.spUpgrade[e].active=t<100}}),cc._RF.pop()},{GameTools:"GameTools",LoadResLayer:"LoadResLayer"}],GameRule:[function(e,t,i){"use strict";cc._RF.push(t,"2f421HRGztERL14ePEtQbdT","GameRule"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},onBtnClick:function(e){"backButton"===e.target.name&&this.node.destroy()}}),cc._RF.pop()},{}],GameTools:[function(e,t,i){"use strict";cc._RF.push(t,"f8314izJGZNjpZDWERznUPh","GameTools"),Object.defineProperty(i,"__esModule",{value:!0}),i.GameTools=void 0;var a=e("Config"),o={checkInTodaySignIn:function(){this.isTest=!1,this.isClearData=!1,this.testTime="2018-12-16",this.isSignIn=!1,this.todayTime=this.isTest?["2018-12-10","2018-12-11","2018-12-12","2018-12-13","2018-12-14","2018-12-15"]:[];var e=this.isTest||this.isClearData?"":a.config.getSignIn();""!=e&&null!=e&&void 0!=e&&(this.todayTime=e.timeData);var t=this.getTodayTime();if(0===this.todayTime.length)this.isSignIn=!0;else if(this.judgeTime(t,this.todayTime[this.todayTime.length-1])){this.isSignIn=!0,this.getDays(this.todayTime[this.todayTime.length-1],t)>1&&(this.todayTime.length=0)}return 7===this.todayTime.length&&(this.todayTime=[]),this.isSignIn},getIsTodaySignIn:function(){return this.isSignIn},getTime:function(){return this.todayTime},getTodayTime:function(){var e=new Date,t=e.getFullYear(),i=e.getMonth()+1,a=e.getDate();return this.isTest?this.testTime:t+"-"+i+"-"+a},judgeTime:function(e,t){var i=new Date(e),a=new Date(t);return i.getTime()>a.getTime()},getDays:function(e,t){var i,a;i=e.split("-"),a=t.split("-");var o=new Date(i[0],i[1]-1,i[2]),n=new Date(a[0],a[1]-1,a[2]);return parseInt(Math.abs(o-n)/1e3/60/60/24)},getRankData:function(e){cc.loader.loadRes("prefab/RankingListView",function(t,i){if(!t){var a=cc.instantiate(i);e.addChild(a)}})},removeRankData:function(){0},submitScore:function(e){0},updateScore:function(e,t){0}};i.GameTools=o,cc._RF.pop()},{Config:"Config"}],GeometryItem:[function(e,t,i){"use strict";cc._RF.push(t,"cd1ba/VL7lP677+N/Lffzjq","GeometryItem"),cc.Class({extends:cc.Component,properties:{geometryLb:cc.Label},onLoad:function(){this.clickNum=1},setGeometryNum:function(e){this.clickNum=e,this.geometryLb.string=this.clickNum}}),cc._RF.pop()},{}],Geometry:[function(e,t,i){"use strict";cc._RF.push(t,"55fe4pLRytK2pMujHfTWZfe","Geometry");var a=e("LoadResLayer");cc.Class({extends:cc.Component,properties:{geometryLayout:cc.Prefab,geometryArr:[cc.Prefab]},onLoad:function(){},init:function(e){this.gameCtl=e,this.initPool(),this.createGeometryLayout()},initPool:function(){this.enemyPool=new cc.NodePool;for(var e=0;e<10;++e){var t=cc.instantiate(this.geometryLayout);this.enemyPool.put(t)}this.geometryPool=[];for(var i=0;i<5;i++){this.geometryPool[i]=new cc.NodePool;for(var a=0;a<20;++a){var o=cc.instantiate(this.geometryArr[i]);this.geometryPool[i].put(o)}}},createGeometryLayout:function(){var e=null;this.enemyPool.size()<=0&&cc.log("\u5b9e\u4f8b\u5316\u7269\u4f53\u7236\u8282\u70b9"),e=this.enemyPool.size()>0?this.enemyPool.get():cc.instantiate(this.geometryLayout),window.bIsIPhoneX&&(e.y+=100),e.parent=this.node,this.createGeometry(e)},onGeometryLayoutKill:function(e){e.setPosition(0,40),this.enemyPool.put(e)},createGeometry:function(e){var t=Math.ceil(3*Math.random())+2;this.xPos=[],this.maxScore=[];var i=["addBall","largenBall"],a=[],o=null;do{var n=(o=this.randomGeometry()).name;(-1==i.indexOf(n)||-1!=i.indexOf(n)&&-1==a.indexOf(n))&&(a.push(n),this.setGeometry(o,e))}while(a.length<t);if(this.maxScore.length>0){if(this.maxScore.length>1){this.maxScore.sort(function(e,t){return t.meanScore-e.meanScore})}this.maxScore[0].curGeometry.setScale(1.4)}},randomGeometry:function(){var e=Math.random();e=e<this.gameCtl.userInfo.propProbability?Math.floor(2*Math.random())+3:Math.floor(3*Math.random());return this.geometryPool[e].size()<=0&&cc.log("\u5b9e\u4f8b\u5316\u7269\u4f53"+e),this.geometryPool[e].size()>0?this.geometryPool[e].get():cc.instantiate(this.geometryArr[e])},setGeometry:function(e,t){var i=0;do{i=Math.floor(5*Math.random())-2}while(-1!=this.xPos.indexOf(i));this.xPos.push(i);var o=window.bIsIPhoneX?Math.floor(16*Math.random())-8:Math.floor(6*Math.random())-3,n=Math.floor(16*Math.random())-8;if(e.setPosition(95*i+n,o),e.setScale(1.1),"block"===e.name||"circle"===e.name||"triangle"===e.name){var s=Math.ceil(6*Math.random()),l=a.ImageRes.geometryAtlas[e.name+"_"+s];e.getChildByName("geometryNode").getComponent(cc.Sprite).spriteFrame=l;var r=Math.floor(60*Math.random())+10;e.setRotation(r),e.getChildByName("geometryNode").getChildByName("geometryLb").setRotation(-r)}if(t.addChild(e),"block"===e.name||"circle"===e.name||"triangle"===e.name){var c=Math.random(),h=this.gameCtl.userInfo.maxScore-this.gameCtl.userInfo.minScore,d=(c<.3?Math.ceil(Math.random()*parseInt(.2*h)):c<.7?parseInt(.2*h)+Math.ceil(Math.random()*parseInt(.6*h)):parseInt(.8*h)+Math.ceil(Math.random()*parseInt(.2*h)))+this.gameCtl.userInfo.minScore;e.getComponent("GeometryItem").setGeometryNum(d);var m=e.getComponent("GeometryItem").clickNum;if(m>1.4*this.gameCtl.userInfo.meanScore){var u={};u.meanScore=m,u.curGeometry=e,this.maxScore.push(u)}}},onGeometryKill:function(e){e.setScale(1),"block"===e.name?this.geometryPool[0].put(e):"circle"===e.name?this.geometryPool[1].put(e):"triangle"===e.name?this.geometryPool[2].put(e):"addBall"===e.name?this.geometryPool[3].put(e):"largenBall"===e.name&&this.geometryPool[4].put(e)},initGeometry:function(){for(var e=0;e<this.node.childrenCount;e++){this.node._children[e].y=window.bIsIPhoneX?this.node._children[e].y+100:this.node._children[e].y+90;for(var t=0;t<this.node._children[e].childrenCount;t++){this.node._children[e]._children[t].getChildByName("geometryNode").y+=1e-4}}this.createGeometryLayout()},getGameIsEnd:function(){var e=!1,t=this.node._children[0];if(t.y>=760+8*(window.bIsIPhoneX?15:0)){for(var i=0,a=0,o=0;o<t.childrenCount;o++){var n=t._children[o];"addBall"==n.name?i++:"largenBall"==n.name?0:a++}if(a>0)e=!0;else{this.gameCtl.ballNumber+=i,this.gameCtl.ballManage.setBallNumber(this.gameCtl.ballNumber);for(var s=t;s.childrenCount>0;)this.onGeometryKill(s._children[0]);this.onGeometryLayoutKill(s)}}return e},revive:function(){var e=this;e.serveSpeed=300;var t=setInterval(function(){if(i>0){var a=e.node._children[0];if(a.childrenCount>0){var o=cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.1,.6),cc.callFunc(function(){e.onGeometryKill(a._children[0])}));a._children[0].runAction(o)}else i--,e.onGeometryLayoutKill(a)}else clearInterval(t),e.gameCtl.initNewGame()},e.serveSpeed),i=this.node.childrenCount>=3?3:this.node.childrenCount;this.gameCtl.bIsStartBall=!1},clearGeometry:function(){for(;this.node.childrenCount>0;){for(var e=this.node._children[0];e.childrenCount>0;)this.onGeometryKill(e._children[0]);this.onGeometryLayoutKill(e)}}}),cc._RF.pop()},{LoadResLayer:"LoadResLayer"}],LevelItemNum:[function(e,t,i){"use strict";cc._RF.push(t,"6ad4bsyvwxFYK0whYcyFggY","LevelItemNum");e("LoadResLayer");cc.Class({extends:cc.Component,properties:{levelNum:cc.Label,levelIndex:0},onLoad:function(){},onLevelBtnClick:function(e){},setCurLevelNum:function(e,t){this.levelNum.string=e,this.levelIndex=t}}),cc._RF.pop()},{LoadResLayer:"LoadResLayer"}],LevelItem:[function(e,t,i){"use strict";cc._RF.push(t,"90fa5zj7C1H37ju0sTxl24O","LevelItem");var a=e("LoadResLayer");cc.Class({extends:cc.Component,properties:{levelTip:cc.Prefab,levelSprite:cc.Sprite,levelLock:cc.Node,levelLight:cc.Node,levelNum:cc.Label,levelIndex:0},onLoad:function(){},init:function(e,t){this.gameCtl=t,this.selectLevel=e},onLevelBtnClick:function(e){if(this.gameCtl.bIsStartBall)if(this.levelLock.active)a.loadResLayer.prototype.addSystemTip("\u5173\u5361\u672a\u89e3\u9501");else{this.selectLevel.setLevelShow(this.levelIndex);var t=cc.instantiate(this.levelTip);t.getComponent("LevelTip").text="\u786e\u5b9a\u524d\u5f80\u7b2c"+this.levelIndex+"\u5173\u5417",this.gameCtl.node.addChild(t),t.getComponent("LevelTip").tipClick=this.tipClick.bind(this)}else a.loadResLayer.prototype.addSystemTip("\u5f39\u7403\u56de\u6536\u524d\u6682\u65e0\u6cd5\u9009\u5173")},setLevelLock:function(e){this.levelLock.active=e,this.levelLight.active=!e,this.levelNum.node.color=e?cc.color(95,102,255):cc.color(255,201,75)},setLevelNum:function(e){this.levelNum.string=e,this.levelIndex=e},tipClick:function(e){var t=e.target.name;"closeBtn"===t?e.target.parent.parent.destroy():"confirmBtn"===t&&(this.gameCtl.userInfo.guanqiaNum=this.levelIndex,this.gameCtl.tempLevelNum=this.levelIndex,this.gameCtl.setGuanqia(),this.gameCtl.bIsGuanqia=!1,this.gameCtl.ballScore=this.gameCtl.userInfo.guanqiaNum>=2?this.gameCtl.userInfo.getFrontIntNum():0,this.gameCtl.ballManage.setBallScore(this.gameCtl.ballScore),e.target.parent.parent.destroy(),this.selectLevel.node.destroy())},setLevelSprite:function(e){this.levelSprite.enabled=e},onLevelClick:function(){if(this.gameCtl.bIsStartBall)if(this.levelLock.active)a.loadResLayer.prototype.addSystemTip("\u5173\u5361\u672a\u89e3\u9501");else{this.selectLevel.setLevelShow(this.levelIndex);var e=cc.instantiate(this.levelTip);e.getComponent("LevelTip").text="\u786e\u5b9a\u524d\u5f80\u7b2c"+this.levelIndex+"\u5173\u5417",this.gameCtl.node.addChild(e),e.getComponent("LevelTip").tipClick=this.tipClick.bind(this)}else a.loadResLayer.prototype.addSystemTip("\u5f39\u7403\u56de\u6536\u524d\u6682\u65e0\u6cd5\u9009\u5173")}}),cc._RF.pop()},{LoadResLayer:"LoadResLayer"}],LevelTip:[function(e,t,i){"use strict";cc._RF.push(t,"98f98slTelDXrU2hsGaNDV/","LevelTip"),cc.Class({extends:cc.Component,properties:{tipLabel:cc.Label,text:""},onLoad:function(){this.tipLabel.string=this.text},tipClick:function(e){}}),cc._RF.pop()},{}],LoadResLayer:[function(e,t,i){"use strict";cc._RF.push(t,"86d3eZo68FFYYRwaTHih/qJ","LoadResLayer"),Object.defineProperty(i,"__esModule",{value:!0});var a={},o={},n=cc.Class({extends:cc.Component,properties:{systemTip:cc.Prefab,unlockTip:cc.Prefab},onLoad:function(){this.laodImg("ball/geometry"),a.systemTipPfb=this.systemTip,a.unlockTipPfb=this.unlockTip},laodImg:function(e,t){cc.loader.loadRes(e,cc.SpriteAtlas,function(e,t){o.geometryAtlas=t._spriteFrames})},addSystemTip:function(e,t){var i=cc.instantiate(a.systemTipPfb);i.getComponent("SystemTip").text=e,t&&(i.getComponent("SystemTip")._bIsClick=t),cc.director.getScene().getChildByName("Canvas").addChild(i)},addUnlockTip:function(e,t){var i=cc.instantiate(a.unlockTipPfb);i.getComponent("Unlock").init(e,t),cc.director.getScene().getChildByName("Canvas").addChild(i)}});i.ImageRes=o,i.loadResLayer=n,cc._RF.pop()},{}],LoginLayer:[function(e,t,i){"use strict";cc._RF.push(t,"020caGLGQ5ESqpK8wNZq2U7","LoginLayer");var a=e("GameTools"),o=e("Config");cc.Class({extends:cc.Component,properties:{loadNode:cc.Node,loadingBar:cc.ProgressBar,laodingTip:cc.Label,loadingSpeed:0,lbVersion:cc.Label,lbID:cc.Label,lbVersion1:cc.Label,lbID1:cc.Label,gameStart:cc.Node,gameBox:cc.Prefab,signIn:cc.Prefab,startBallNum:cc.Label,isLoadingStatusChecked:{default:!1,visible:!1}},onLoad:function(){var e=cc.view.getVisibleSize().width/cc.view.getVisibleSize().height,t=this.node.getComponent(cc.Canvas),i=e>1.775;t.fitWidth=!i,t.fitHeight=i,window.bIsIPhoneX=!1;var a=cc.winSize;a.height/a.width>2&&(window.bIsIPhoneX=!0),t.alignWithScreen()},start:function(){window.ballNum=10,window.boxBallNum=50,window.awardGoldNum=0,window.awardSkillNum=[0,0,0],window.isSignInSevenDays=!1,window.shareThreeNum=0;var e=o.config.getSignIn();""!=e&&null!=e&&void 0!=e&&(window.isSignInSevenDays=e.isSignInSevenDays,window.shareThreeNum=void 0==e.shareThreeNum?0:e.shareThreeNum),window.sharePath=cc.url.raw("resources/res/share.jpg"),window.userInfoPath=cc.url.raw("resources/res/danzhu_ks_anniu1.png"),cc.loader.md5Pipe&&(window.sharePath=cc.loader.md5Pipe.transformURL(window.sharePath),window.userInfoPath=cc.loader.md5Pipe.transformURL(window.userInfoPath)),this.updateCheck(),this.lbVersion.string="V1.0.5",this.lbID.string="ID 123456",this.lbVersion1.string="V1.0.5",this.lbID1.string="ID 123456"},update:function(e){this.isLoadingStatusChecked&&this.updateLoadingInfo(e)},updateCheck:function(){var e=this,t=cc.callFunc(function(){e.loadingBar.progress=0}),i=cc.delayTime(1);cc.sys.isBrowser&&!cc.sys.isMobile&&(i=cc.delayTime(.1));var a=cc.callFunc(this.updateResultCheck.bind(this));this.node.runAction(cc.sequence(t,i,a))},updateResultCheck:function(){this.isLoadingStatusChecked=!0},updateLoadingInfo:function(e){var t=this.loadingBar.progress;if(t+=e*this.loadingSpeed,this.loadingBar.progress=t,this.loadingBar.progress>=1&&(t=1),this.laodingTip.string="\u52a0\u8f7d\u4e2d\uff08"+Math.round(100*t)+"%\uff09",this.loadingBar.progress>=1&&(this.isLoadingStatusChecked=!1,this.loadNode.active=!1,this.gameStart.active=!0,this.setBoxBallNum(),a.GameTools.checkInTodaySignIn())){var i=cc.instantiate(this.signIn);this.node.getChildByName("date").addChild(i)}},setBoxBallNum:function(){this.startBallNum.string="\u4eca\u65e5\u5f00\u5c40"+window.ballNum+"\u7403"},onBtnClick:function(e){var t=e.target;if("upgradeBtn"===t.name){var i=cc.instantiate(this.gameBox);this.node.addChild(i),i.getComponent("GameBox").init(null,this)}else"gameStartBtn"===t.name?cc.director.loadScene("Tyt"):"topBtn"===t.name&&a.GameTools.getRankData(this.node)}}),cc._RF.pop()},{Config:"Config",GameTools:"GameTools"}],RankingListView:[function(e,t,i){"use strict";cc._RF.push(t,"31b56tJWjpPlrcCAXTwiyUM","RankingListView");var a=e("LoadResLayer"),o=e("GameTools");cc.Class({extends:cc.Component,properties:{backButton:cc.Node,rankingScrollView:cc.Sprite,shareTicket:null,bIsFriendRank:!0},onLoad:function(){},start:function(){this.setClickState()},setClickState:function(){if(this.bIsFriendRank){if(this.rankingScrollView.node.active=!0,null!=this.shareTicket){var e=new cc.Node;e.addComponent(cc.Label).string="\u7fa4\u6392\u884c",e.setPosition(-260,503),this.node.addChild(e)}a.loadResLayer.prototype.addSystemTip("\u6682\u65e0\u6392\u884c\u699c\u6570\u636e")}else this.rankingScrollView.node.active=!1,a.loadResLayer.prototype.addSystemTip("\u6682\u65e0\u4e16\u754c\u6392\u884c")},onBtnClick:function(e){var t=e.target;"backButton"===t.name?this.backButtonFunc():"friendRank"===t.name?(this.bIsFriendRank=!0,this.setClickState()):"worldRank"===t.name&&(this.bIsFriendRank=!1,this.setClickState())},backButtonFunc:function(e){o.GameTools.removeRankData(),this.node.destroy()},_updateSubDomainCanvas:function(){0},update:function(){this.bIsFriendRank&&this._updateSubDomainCanvas()}}),cc._RF.pop()},{GameTools:"GameTools",LoadResLayer:"LoadResLayer"}],SelectLevel:[function(e,t,i){"use strict";cc._RF.push(t,"d330d4BDepFOqloESJP0Nv/","SelectLevel");var a=e("LoadResLayer");cc.Class({extends:cc.Component,properties:{levelItem:cc.Prefab,selectLevelNum:cc.Prefab,levelLayout:cc.Node,levelEditLb:cc.Label,levelItemArr:[cc.Node]},onLoad:function(){},init:function(e){this.gameCtl=e,this.setLevelItem()},onBtnClick:function(e){var t=e.target;if("backButton"===t.name)this.node.destroy();else if("confirm"===t.name){var i=this.levelEditLb.string;if(""==i||null==i)a.loadResLayer.prototype.addSystemTip("\u8bf7\u8f93\u5165\u6b63\u786e\u5173\u5361\u503c");else if(isNaN(i))a.loadResLayer.prototype.addSystemTip("\u8bf7\u8f93\u5165\u6b63\u786e\u5173\u5361\u503c");else if(parseInt(i)<1||parseInt(i)>100)a.loadResLayer.prototype.addSystemTip("\u8bf7\u8f93\u51651-100\u5173\u5361\u503c");else{this.levelItemArr[parseInt(i)-1].getComponent("LevelItem").onLevelClick()}}else if("levelNum"===t.name){var o=cc.instantiate(this.selectLevelNum);this.node.addChild(o),o.getComponent("selectLevelNum").init(this)}},setLevelItem:function(){for(var e=0;e<100;e++){var t=cc.instantiate(this.levelItem);this.levelLayout.addChild(t);var i=t.getComponent("LevelItem");i.init(this,this.gameCtl),i.setLevelLock(e+1>this.gameCtl.userInfo.highguanqiaNum),i.setLevelNum(e+1),this.levelItemArr.push(t)}this.gameCtl.tempLevelNum>0?this.setLevelShow(this.gameCtl.tempLevelNum):this.setLevelShow(this.gameCtl.userInfo.highguanqiaNum)},setLevelShow:function(e){for(var t=0;t<100;t++){var i=this.levelItemArr[t].getComponent("LevelItem");t+1==e?i.setLevelSprite(!0):i.setLevelSprite(!1)}}}),cc._RF.pop()},{LoadResLayer:"LoadResLayer"}],SignIn:[function(e,t,i){"use strict";cc._RF.push(t,"7476cqsgalA8YL+2B2VBGL1","SignIn");var a=e("GameTools"),o=e("Config"),n=e("LoadResLayer"),s=["\u91d1\u5e01","\u53cc\u500d","\u91d1\u5e01","\u70b8\u5f39","\u91d1\u5e01","\u6fc0\u5149","\u91d1\u5e01"],l=[188,1,588,1,1088,1,1588];cc.Class({extends:cc.Component,properties:{signInNode:cc.Button,doubleNode:cc.Button,signInLb:cc.Label,awardNodeArr:[cc.Button],awardNumLb:[cc.Label]},onLoad:function(){this.isTodaySignIn=a.GameTools.getIsTodaySignIn(),this.todayTime=a.GameTools.getTime(),this.isTodaySignIn||(this.signInNode.interactable=!1,this.signInLb.string="\u5df2\u7b7e\u5230");for(var e=0;e<this.todayTime.length;++e)this.awardNodeArr[e].interactable=!1;for(var t=0;t<7;++t)this.awardNumLb[t].string=l[t];this.awardNodeArr[this.todayTime.length].node.getChildByName("guang").active=!0},signInClick:function(e){var t=e.target;if("signInBtn"===t.name){if(this.isTodaySignIn){if(this.todayTime.length>0)a.GameTools.getDays(this.todayTime[this.todayTime.length-1],a.GameTools.getTodayTime())>1&&(this.todayTime.length=0);this.todayTime.push(a.GameTools.getTodayTime()),this.signInNode.interactable=!1,this.signInLb.string="\u5df2\u7b7e\u5230",this.awardNodeArr[this.todayTime.length-1].interactable=!1,this.awardNodeArr[this.todayTime.length-1].node.getChildByName("guang").active=!1,this.receiveAward(),7==this.todayTime.length&&(window.isSignInSevenDays=!0),n.loadResLayer.prototype.addSystemTip("\u7b7e\u5230\u6210\u529f\uff0c\u83b7\u5f97"+s[this.todayTime.length-1]+l[this.todayTime.length-1]+"\u4e2a");var i={};i.timeData=this.todayTime,i.isSignInSevenDays=window.isSignInSevenDays,o.config.saveSignIn(i),Math.random()<.3&&(console.log("\u5956\u52b1\u7ffb\u500d"),this.signInNode.node.active=!1,this.doubleNode.node.active=!0)}}else if("close"===t.name)this.node.destroy();else if("doubleBtn"===t.name){var r=this;r.doubleAward()}},doubleAward:function(){this.receiveAward(!0),this.doubleNode.interactable=!1,n.loadResLayer.prototype.addSystemTip("\u7ffb\u500d\u6210\u529f\uff0c\u83b7\u5f97"+s[this.todayTime.length-1]+2*l[this.todayTime.length-1]+"\u4e2a")},receiveAward:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.todayTime.length-1,i=e?2*l[t]:l[t];switch(s[t]){case"\u91d1\u5e01":window.awardGoldNum+=i;break;case"\u53cc\u500d":window.awardSkillNum[0]+=i;break;case"\u70b8\u5f39":window.awardSkillNum[2]+=i;break;case"\u6fc0\u5149":window.awardSkillNum[1]+=i}}}),cc._RF.pop()},{Config:"Config",GameTools:"GameTools",LoadResLayer:"LoadResLayer"}],Skill:[function(e,t,i){"use strict";cc._RF.push(t,"91d3a1lXRFDBZqm9YDDH8ch","Skill");e("LoadResLayer");cc.Class({extends:cc.Component,properties:{onBtnCallBack:null,skillNum:[]},onLoad:function(){},init:function(e){this.gameCtl=e,this.skillNum=this.gameCtl.userInfo.skillNum},setSkillNum:function(e,t){this.skillNum[e]+=t},onBtnClick:function(e){}}),cc._RF.pop()},{LoadResLayer:"LoadResLayer"}],SystemTip:[function(e,t,i){"use strict";cc._RF.push(t,"a2c380BPEpCvIGjWUFrEjwC","SystemTip"),cc.Class({extends:cc.Component,properties:{tipLabel:cc.Label,text:"",_bIsClick:!1},onLoad:function(){this.tipLabel.string=this.text},tipClick:function(e){var t=e.target.name;"closeBtn"!==t&&"confirmBtn"!==t||(this._bIsClick&&cc.director.loadScene("Login"),this.node.destroy())}}),cc._RF.pop()},{}],Test:[function(e,t,i){"use strict";cc._RF.push(t,"b68b3axFPhMFqM90KwKHS16","Test");var a=e("LoadResLayer");cc.Class({extends:cc.Component,properties:{btnLayout:cc.Node,addScoreNode:cc.Node,addGoldNode:cc.Node},onLoad:function(){},init:function(e){this.gameCtl=e;for(var t=0;t<6;t++){var i=this.addScoreNode._children[t],a=new cc.Component.EventHandler;a.target=this.node,a.component="Test",a.handler="addScoreClick",a.customEventData=t,i.getComponent(cc.Button).clickEvents.push(a)}for(var o=0;o<6;o++){var n=this.addGoldNode._children[o],s=new cc.Component.EventHandler;s.target=this.node,s.component="Test",s.handler="addGoldClick",s.customEventData=o,n.getComponent(cc.Button).clickEvents.push(s)}},testClick:function(e){var t=e.target;if("openBtn"===t.name){var i=this.btnLayout,o=t.getChildByName("Label").getComponent(cc.Label);i.active?i.runAction(cc.sequence(cc.moveTo(.5,cc.v2(-57,i.y)),cc.callFunc(function(){o.string="\u5c55\u5f00",i.active=!1}))):(i.active=!0,i.runAction(cc.sequence(cc.moveTo(.5,cc.v2(57,i.y)),cc.callFunc(function(){o.string="\u6536\u8d77"}))))}else if("resetBtn"===t.name)this.gameCtl.clearData(),a.loadResLayer.prototype.addSystemTip("\u6e05\u9664\u6210\u529f\uff01",!0);else if("playerBtn"===t.name)this.gameCtl.ballScore+=this.gameCtl.userInfo.score-this.gameCtl.ballScore,this.gameCtl.ballManage.setBallScore(this.gameCtl.ballScore),this.gameCtl.bIsGuanqia=!0,this.gameCtl.bIsStartBall&&this.gameCtl.gameEnd();else if("failureBtn"===t.name){var n=cc.instantiate(this.gameCtl.gameEndPrb);this.node.parent.addChild(n),n.getComponent("GameEnd").init(this.gameCtl)}else if("addScoreBtn"===t.name)this.addScoreNode.active=!this.addScoreNode.active;else if("addGoldBtn"===t.name)this.addGoldNode.active=!this.addGoldNode.active;else if("addPropBtn"===t.name)for(var s=0;s<3;s++)this.gameCtl.gameSkill.setSkillNum(s,1);else"addBallBtn"===t.name&&(this.gameCtl.bIsStartBall?(this.gameCtl.ballNumber+=10,this.gameCtl.ballManage.setBallNumber(this.gameCtl.ballNumber)):this.gameCtl.gameBoxNum+=10)},addScoreClick:function(e,t){var i=100*Math.pow(10,t);this.gameCtl.ballScore+=i,this.gameCtl.ballManage.setBallScore(this.gameCtl.ballScore),this.gameCtl.ballScore>=this.gameCtl.userInfo.score&&(this.gameCtl.bIsGuanqia=!0,this.gameCtl.bIsStartBall&&this.gameCtl.gameEnd())},addGoldClick:function(e,t){var i=100*Math.pow(10,t);this.gameCtl.curGoldNum+=i,this.gameCtl.goldNum+=i;var a=cc.instantiate(this.gameCtl.gamePiaofen);this.gameCtl.nodeRole.addChild(a),a.getComponent(cc.Label).string="+"+i,a.runAction(cc.sequence(cc.moveTo(.5,cc.v2(a.x,130)),cc.fadeOut(.3),cc.callFunc(function(){return a.destroy()})))}}),cc._RF.pop()},{LoadResLayer:"LoadResLayer"}],Unlock:[function(e,t,i){"use strict";cc._RF.push(t,"c9f317nwvpEqKg2JUfBzbPj","Unlock"),cc.Class({extends:cc.Component,properties:{tipLb:cc.Label,currentLb:cc.Label},onLoad:function(){},init:function(e,t){this.tipLb.string=e,this.currentLb.string=t},tipClick:function(e){var t=e.target.name;"closeBtn"!==t&&"confirmBtn"!==t||this.node.destroy()}}),cc._RF.pop()},{}],boom:[function(e,t,i){"use strict";cc._RF.push(t,"21ca7Vh41hPiocL+1rxDSi+","boom"),cc.Class({extends:cc.Component,properties:{curIndex:0},init:function(e){this.gameCtl=e},onBeginContact:function(e,t,i){switch(i.tag){case 1:case 2:case 3:0==this.curIndex?this.gameCtl.onBoomContactWall(t.node,i.node):2==this.curIndex&&this.gameCtl.onLaserContactWall(t.node,i.node);break;case 4:case 5:case 6:0==this.curIndex?this.gameCtl.onBoomContactWall(t.node,i.node):1==this.curIndex?this.gameCtl.onBoomCopyContactGeometry(t.node,i.node):2==this.curIndex&&this.gameCtl.onLaserContactGeometry(t.node,i.node)}},onEndContact:function(e,t,i){switch(i.tag){case 4:case 5:case 6:2==this.curIndex&&this.gameCtl.onLaserContactEndGeometry(t.node,i.node)}}}),cc._RF.pop()},{}],selectLevelNum:[function(e,t,i){"use strict";cc._RF.push(t,"0adebuUzz9BhKAKedeE/V/8","selectLevelNum");e("LoadResLayer");cc.Class({extends:cc.Component,properties:{levelItemNum:cc.Prefab,levelConent:cc.Node},onLoad:function(){},init:function(e){this.selectLevel=e,this.setLevelItemNum()},onBtnClick:function(e){"backButton"===e.target.name&&this.node.destroy()},setLevelItemNum:function(){for(var e=0;e<12;e++){var t=cc.instantiate(this.levelItemNum);this.levelConent.addChild(t);var i=t.getComponent("LevelItemNum");i.onLevelBtnClick=this.onLevelBtnClick.bind(this),e<10?i.setCurLevelNum(e,e):10==e?i.setCurLevelNum("\u6e05\u9664",e):11==e&&i.setCurLevelNum("\u786e\u8ba4",e)}},onLevelBtnClick:function(e){var t=e.target.getComponent("LevelItemNum").levelIndex;t<10?this.selectLevel.levelEditLb.string+=t:10==t?this.selectLevel.levelEditLb.string="":11==t&&this.node.destroy()}}),cc._RF.pop()},{LoadResLayer:"LoadResLayer"}],userManager:[function(e,t,i){"use strict";cc._RF.push(t,"ac8651lXONMjKz7/hRp7RPJ","userManager"),Object.defineProperty(i,"__esModule",{value:!0});var a=new(cc.Class({ctor:function(){this.highguanqiaNum=1,this.guanqiaNum=1,this.score=340,this.minScore=4,this.maxScore=30,this.meanScore=17,this.objectNum=10,this.ballNum=10,this.addProperty=1,this.onceScore=2,this.reviveNum=1,this.propProbability=.2,this.grade=[],this.consume=0,this.weapon=0,this.head=0,this.tops=0,this.bottoms=13,this.belt=0,this.shoe=1500,this.grade=new Array;for(var e=0;e<6;e++)this.grade[e]=1;this.goldNum=100,this.ballScore=0,this.skillNum=[2,2,2],this.dropGold=10,this.currentClick=0,this.bIsDetail=!1},setUserInfo:function(){var e=this.guanqiaNum;if(e>1){this.minScore=4+2*(e-1),this.maxScore=e<5?30+20*(e-1):80+20*(e-4),this.meanScore=(this.minScore+this.maxScore)/2,this.objectNum=10+e-1,this.addProperty=1+.1*(parseInt((e-2)/3)+1);var t=this.meanScore*this.objectNum*(10*this.addProperty)*this.onceScore/10,i=this.getFrontNum();this.score=this.setInteger((10*t+10*i)/10),this.dropGold=10+8*(e-1),this.propProbability=.2-.001*(e-1)}else this.score=340,this.minScore=4,this.maxScore=30,this.meanScore=17,this.objectNum=10,this.addProperty=1,this.dropGold=10,this.propProbability=.2;this.reviveNum=1},getFrontNum:function(){var e=this.guanqiaNum-1;if(1==e)return 340;for(var t=0,i=2;i<=e;i++){t=(10*t+10*((4+2*(i-1)+(i<5?30+20*(i-1):80+20*(i-4)))/2*(10+i-1)*(10*(1+.1*(parseInt((i-2)/3)+1)))*this.onceScore/10))/10}return t+=340},getFrontIntNum:function(){var e=this.getFrontNum();return this.setInteger(10*e/10)},setInteger:function(e){var t=0;return e>1e7?t=4:e>1e5?t=3:e>1e3?t=2:e>10&&(t=1),parseInt(e/Math.pow(10,t))*Math.pow(10,t)},initEquipGrade:function(e,t){this.grade[e]=t,this.setDetailVal(e)},setEquipGrade:function(e,t){this.grade[e]+=t,this.setDetailVal(e)},setDetailVal:function(e){var t=this.grade[e];if(t>1)switch(e){case 0:this.weapon=(4+2*(t-2))/10;break;case 1:this.head=(10+5*(t-2))/100;break;case 2:this.tops=t-2+1;break;case 3:this.bottoms=t/20+13;break;case 4:this.belt=(2+1*(t-2))/10;break;case 5:this.shoe=1500+10*(t-1)}else switch(e){case 0:this.weapon=0;break;case 1:this.head=0;break;case 2:this.tops=0;break;case 3:this.bottoms=13;break;case 4:this.belt=0;break;case 5:this.shoe=1500}},getNextEquipConsume:function(e){var t=this.grade[e]+1;return this.getAnyEquipConsume(t)},getAnyEquipConsume:function(e){if(e>2){for(var t=0,i=2;i<e;i++){t+=1+8*(i-1)}return t+=11}return 11},getEquipGrade:function(e){return this.grade[e]},getNextEquipGrade:function(e,t){var i=t?this.grade[e]+t:this.grade[e]+1;if(i>100)return"\u7b49\u7ea7\u5df2\u6ee1";var a=0;switch(e){case 0:a=((4+2*(i-2))/10).toFixed(1);break;case 1:a=((10+5*(i-2))/100).toFixed(2);break;case 2:a=i-2+1;break;case 3:a=(i/20+13).toFixed(2);break;case 4:a=((2+1*(i-2))/10).toFixed(1);break;case 5:a=1500+10*(i-1)}return 0!=e&&1!=e&&4!=e||(a+="%"),a}}));i.UserManager=a,cc._RF.pop()},{}]},{},["Ball","BallManage","GameCtl","GameTools","Geometry","GeometryItem","LoadResLayer","LoginLayer","SignIn","AD","GameBox","GameEnd","GameMenu","GameNextLevel","GameProperty","GameRule","LevelItem","LevelItemNum","LevelTip","RankingListView","SelectLevel","SystemTip","Test","Unlock","selectLevelNum","Config","userManager","Skill","boom"]);